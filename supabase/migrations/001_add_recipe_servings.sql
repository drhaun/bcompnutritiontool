-- Add recipe_servings column to ni_recipes table
-- This stores how many servings the full recipe makes (ingredients are for full recipe)
-- Nutrition values (calories, protein, etc.) are per-serving

ALTER TABLE ni_recipes ADD COLUMN IF NOT EXISTS recipe_servings INTEGER DEFAULT 1;

-- Update each recipe with the correct servings (extracted from original CSV)
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'almond-joy-overnight-oats';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'healthier-breakfast-burrito';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'healthier-breakfast-sandwich';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'spinach-cheese-egg-muffins';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'chicken-avocado-melt';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'greek-turkey-burgers';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'taco-chicken';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'salmon-burger';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'crockpot-bbq-chicken';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'mediterranean-wrap';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'ground-turkey-sweet-potato-bake';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'crockpot-sante-fe-chicken';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'blueberry-coconut-chia-seed-pudding';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'lightened-up-green-bean-casserole';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'roasted-brussels-sprouts-with-balsamic-glaze';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'thanksgiving-kale-salad-with-roasted-butternut-squash';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'sweet-potato-casserole-with-pecan-topping';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'apple-crisp-crumble';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'blueberry-breakfast-bake';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'broccoli-cheddar-egg-muffins';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'tater-tot-breakfast-casserole';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'shrimp-and-broccoli-stir-fry';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'buffalo-chicken-casserole';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'southwest-chicken-salad';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'cheeseburger-wrap';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'creamy-butternut-squash-pasta';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'foil-baked-salmon-and-asparagus';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'protein-oreo-dip';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'fruity-chia-seed-smoothie';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'sweet-potato-hash';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'black-beans-and-rice';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'healthier-egg-salad';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'homemade-sweet-potato-fries';
UPDATE ni_recipes SET recipe_servings = 24 WHERE slug = 'banana-oat-cookies';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'iced-coffee-protein-shake';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'healthy-cinnamon-apples';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'peanut-butter-chia-pudding';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'healthier-baked-ziti';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'green-protein-smoothie';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'pumpkin-smoothie';
UPDATE ni_recipes SET recipe_servings = 20 WHERE slug = 'protein-bites';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'sweet-potato-nachos';
UPDATE ni_recipes SET recipe_servings = 10 WHERE slug = 'garlic-parm-chicken-wings';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'coconut-mango-chia-seed-pudding';
UPDATE ni_recipes SET recipe_servings = 10 WHERE slug = 'homemade-protein-granola-bars';
UPDATE ni_recipes SET recipe_servings = 10 WHERE slug = 'peanut-butter-banana-protein-bars';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'high-protein-pumpkin-pancakes';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'healthier-buffalo-chicken-wrap';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'beef-and-broccoli-stirfry';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'air-fryer-chicken-wings';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'avocado-tuna-salad';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'buffalo-chicken-salad';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'coffee-protein-smoothie';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'maple-glazed-salmon';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'lemon-garlic-salmon';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'ground-beef-tacos';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'shredded-chicken-tacos';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'mixed-berry-smoothie';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'banana-peanut-butter-smoothie';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'chocolate-banana-protein-shake';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'strawberry-banana-smoothie';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'triple-berry-smoothie';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'air-fryer-steak-bites';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'one-pan-chicken-fajitas';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'greek-chicken-bowl';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'turkey-chili';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'copycat-protein-blizzard';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'copycat-protein-mcflurry';
UPDATE ni_recipes SET recipe_servings = 2 WHERE slug = 'proats';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'avocado-toast-with-egg';
UPDATE ni_recipes SET recipe_servings = 12 WHERE slug = 'chocolate-chip-banana-muffins';
UPDATE ni_recipes SET recipe_servings = 12 WHERE slug = 'blueberry-muffins';
UPDATE ni_recipes SET recipe_servings = 12 WHERE slug = 'banana-protein-muffins';
UPDATE ni_recipes SET recipe_servings = 12 WHERE slug = 'chocolate-chip-protein-muffins';
UPDATE ni_recipes SET recipe_servings = 17 WHERE slug = 'easy-turkey-meatballs';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'high-protein-tuna-salad';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'slow-cooker-chicken-and-rice';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'quinoa-stuffed-peppers';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'shrimp-fried-rice';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'one-pot-chicken-and-rice';
UPDATE ni_recipes SET recipe_servings = 8 WHERE slug = 'teriyaki-chicken-and-vegetables';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'slow-cooker-salsa-chicken';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'honey-garlic-chicken';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'cilantro-lime-grilled-shrimp';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'mediterranean-chicken-and-vegetables';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'pesto-salmon-and-vegetables';
UPDATE ni_recipes SET recipe_servings = 18 WHERE slug = 'mini-bell-pepper-nachos';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'balsamic-chicken-and-vegetables';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'asian-lettuce-wraps';
UPDATE ni_recipes SET recipe_servings = 18 WHERE slug = 'zucchini-pizza-bites';
UPDATE ni_recipes SET recipe_servings = 5 WHERE slug = 'turkey-taco-stuffed-peppers';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'tex-mex-chicken-and-rice';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'egg-roll-in-a-bowl';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'greek-yogurt-parfait';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'cottage-cheese-vegetable-bowl';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'hard-boiled-eggs-with-avocado';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'edamame-and-hummus-snack-plate';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'smoked-salmon-cucumber-bites';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'turkey-and-cheese-roll-ups';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'apple-and-nut-butter';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'string-cheese-and-grapes';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'protein-packed-trail-mix';
UPDATE ni_recipes SET recipe_servings = 1 WHERE slug = 'beef-jerky-with-almonds';
UPDATE ni_recipes SET recipe_servings = 9 WHERE slug = 'chicken-lettuce-wraps';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'lemon-herb-cod';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'blackened-tilapia';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'chipotle-lime-shrimp';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'sesame-ginger-salmon';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'garlic-parmesan-crusted-cod';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'cajun-shrimp-bowl';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'coconut-curry-cod';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'mango-salsa-tilapia';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'honey-sriracha-salmon';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'mediterranean-shrimp-skewers';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'lemon-butter-shrimp-scampi';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'crockpot-pulled-pork';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'hashbrown-egg-casserole-with-feta-spinach-sundried-tomatoes';
UPDATE ni_recipes SET recipe_servings = 6 WHERE slug = 'slow-cooker-pork-carnitas';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'high-protein-chocolate-mousse';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'mexican-street-corn-chicken';
UPDATE ni_recipes SET recipe_servings = 4 WHERE slug = 'crispy-creamy-salsa-tacos';

-- Add index for faster lookups
CREATE INDEX IF NOT EXISTS idx_ni_recipes_recipe_servings ON ni_recipes(recipe_servings);
